<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>üé≤ Multi-Player Dice Game (JS)</title>
  <style>
    body { font-family: Arial; text-align: center; background: #f4f7fb; padding: 30px; }
    button { padding: 10px 16px; margin: 10px; font-size: 15px; border-radius: 8px; border:none; background:#4CAF50; color:white; cursor:pointer;}
    button:disabled { background:#aaa; cursor:default; }
    table { margin:16px auto; border-collapse: collapse; }
    th, td { border:1px solid #ccc; padding:8px 12px; }
    th { background:#eee; }
    #log { margin-top:12px; max-height:140px; overflow:auto; text-align:left; font-size:13px; background:#fff; padding:8px; border-radius:6px; width:360px; margin:auto;}
  </style>
</head>
<body>
  <h1>üé≤ Multi-Player Dice Game</h1>

  <div id="setup">
    <label>Players (2-4): <input id="playerCount" type="number" min="2" max="4" value="2"></label>
    <label>Rounds: <input id="roundCount" type="number" min="1" max="20" value="5"></label>
    <button id="startBtn">Start Game</button>
  </div>

  <div id="game" style="display:none;">
    <h3 id="status">Status</h3>
    <button id="rollBtn">Roll Dice</button>
    <button id="resetBtn">Reset</button>
    <table id="scoreTable"></table>
    <div id="log"></div>
  </div>

<script>
let players=[], scores=[], rounds=5, currentRound=1, currentPlayer=0, gameActive=false;

const startBtn=document.getElementById('startBtn');
const rollBtn=document.getElementById('rollBtn');
const resetBtn=document.getElementById('resetBtn');
const statusEl=document.getElementById('status');
const tableEl=document.getElementById('scoreTable');
const logEl=document.getElementById('log');

function log(msg){ const line=document.createElement('div'); line.textContent=msg; logEl.prepend(line); }

startBtn.onclick=()=>{
  const pcount=parseInt(document.getElementById('playerCount').value)||2;
  rounds=parseInt(document.getElementById('roundCount').value)||5;
  const count=Math.max(2,Math.min(4,pcount));
  players=Array.from({length:count},(_,i)=>`Player ${i+1}`);
  scores=Array(count).fill(0);
  currentRound=1;
  currentPlayer=0;
  gameActive=true;
  document.getElementById('setup').style.display='none';
  document.getElementById('game').style.display='block';
  rollBtn.disabled=false;
  updateStatus();
  updateTable();
  log(`Game started: ${players.length} players, ${rounds} rounds`);
};

resetBtn.onclick=()=>{ location.reload(); };

function rollDice(){ return Math.floor(Math.random()*6)+1; }

rollBtn.onclick=()=>{
  if(!gameActive) return;
  const rollValue=rollDice();
  scores[currentPlayer]+=rollValue;
  log(`${players[currentPlayer]} rolled a ${rollValue} (Round ${currentRound})`);

  if([1,5,6].includes(rollValue)){
    log(`${players[currentPlayer]} gets an extra chance!`);
    updateStatus();
    updateTable();
    return;
  }

  currentPlayer++;
  if(currentPlayer>=players.length){ currentPlayer=0; currentRound++; }

  if(currentRound>rounds){ endGame(); } else { updateStatus(); updateTable(); }
};

function updateStatus(){ statusEl.textContent=gameActive ? `Round ${currentRound} - ${players[currentPlayer]}'s turn` : 'Game not started'; }

function updateTable(){
  let html='<tr><th>Player</th><th>Score</th></tr>';
  players.forEach((p,i)=>{ html+=`<tr><td>${p}</td><td>${scores[i]}</td></tr>`; });
  tableEl.innerHTML=html;
}

function endGame(){
  gameActive=false;
  rollBtn.disabled=true;
  const maxScore=Math.max(...scores);
  const winners=[];
  scores.forEach((s,i)=>{ if(s===maxScore) winners.push(players[i]); });
  const winnerText=winners.length===1 ? `${winners[0]} wins` : `Tie between ${winners.join(', ')}`;
  statusEl.textContent=`üèÜ ${winnerText} with ${maxScore} points!`;
  log(`Game ended. ${winnerText} (${maxScore} points)`);
  updateTable();
}
</script>
</body>
</html>
